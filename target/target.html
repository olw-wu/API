<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>target</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-170079870-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-170079870-1');
  </script>
  <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="target.css">
  <!--引入js文件-->
  <!--  <script type="text/javascript" src="account.js"></script>-->
  <!--引入外部库-->
  <!--  <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>-->
  <!--  <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>-->
  <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">

  <script type="text/javascript" src="https://apis.google.com/js/client.js"> </script>
  <link href="../node_modules/bootstrap/dist/css/bootstrap-theme.css" rel="stylesheet">

  <script src="../node_modules/jquery/dist/jquery.js"></script>

  <script src="../node_modules/bootstrap/dist/js/bootstrap.js"></script>

  <script src="https://apis.google.com/js/api.js"></script>

</head>
<body>

<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../AEManagementAPI.html">首页</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href="../account/account.html">账户</a></li>
        <li><a href="../customDataSource/cnustomDataSource.html">自定义数据源</a></li>
        <li><a href="../test/test.html">实验</a></li>
        <li><a href="../filterCondition/filterCondition.html">过滤条件</a></li>
        <li><a href="../target/target.html">目标</a></li>
        <li><a href="../ProfileUserAssociation/ProfileUserAssociation.html">配置文件用户关联</a></li>
        <li><a href="../ToMarketing/ToMarketing.html">再营销受众群体</a></li>
        <li><a href="../subdivide/subdivide.html">细分</a></li>
        <li><a href="../NonSamplingReport/NonSamplingReport.html">非抽样报告</a></li>
        <li><a href="../uploads/uploads.html">uploads</a></li>
        <li><a href="../dataView/dataview.html">数据视图</a></li>
        <li><a href="../NetworkMediaResources/NetworkMediaResources.html">网络媒体资源</a></li>
        <li><a href="../NetworkMediaResourceUserAssociation/NetworkMediaResourceUserAssociation.html">网络媒体资源用户关联</a></li>

      </ul>
      <form class="navbar-form navbar-left">
        <div class="form-group">
          <label>
            <input type="text" class="form-control" placeholder="Search">
          </label>
        </div>
        <button type="submit" class="btn btn-default">搜索</button>
      </form>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#">登录</a></li>
        <li><a href="#">注册</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">关于GA<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#">GA账户</a></li>
            <li><a href="#">GA参考资料</a></li>
            <li><a href="#">GA常见问题</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="#">寻求帮助</a></li>
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<button onclick="authenticate().then(loadClient)">授权和登录</button>





<!--获取-->
<div class="line5">
  <form class="navbar-form navbar-left"  role="search">
    <div class="form-group">
      <span>accountId:</span><label for="getAccount"></label><input type="text" class="form-control" placeholder="accountID" id="getAccount">
      <span>profiledId:</span><label for="getProfiled"></label><input type="text" class="form-control" placeholder="profiledID" id="getProfiled">
      <span>webPropertyId:</span><label for="getWebProperty"></label><input type="text" class="form-control" placeholder="webPropertyId" id="getWebProperty">
      <span>goalId:</span><label for="getGoal"></label><input type="text" class="form-control" placeholder="goalID" id="getGoal">
    </div>
    <button type="submit" class="btn btn-default" id="getBtn">获取目标</button>
  </form>
</div>

<!--插入-->
<div class="home1">
  <div class="line2">
    <form class="navbar-form navbar-left" role="search" >
      <div class="form-group">
        <span>accountId:</span><label for="insertAccount"></label><input type="text" class="form-control" placeholder="accountID" id="insertAccount">
        <span>profiledId:</span><label for="insertProfiled"></label><input type="text" class="form-control" placeholder="profiledID" id="insertProfiled">
        <span>webPropertyId:</span><label for="insertWebProperty"></label><input type="text" class="form-control" placeholder="webPropertyId" id="insertWebProperty">
      </div>
      <button type="submit" class="btn btn-default" id="insertBtn">插入目标</button>
    </form>
  </div>

  <!--列表-->

  <div class="line7">
    <form class="navbar-form navbar-left"  role="search">
      <div class="form-group">
        <span>accountId:</span><label for="listAccount"></label><input type="text" class="form-control" placeholder="accountID" id="listAccount">
        <span>profiledId:</span><label for="listProfiled"></label><input type="text" class="form-control" placeholder="profiledID" id="listProfiled">
        <span>webPropertyId:</span><label for="listWebProperty"></label><input type="text" class="form-control" placeholder="webPropertyId" id="listWebProperty">
      </div>
      <button type="submit" class="btn btn-default" id="listBtn">读取目标列表</button>
    </form>
  </div>

  <!--  修正-->

  <div class="line6">
    <form class="navbar-form navbar-left"  role="search">
      <div class="form-group">
        <span>accountId:</span><label for="patchAccount"></label><input type="text" class="form-control" placeholder="accountID" id="patchAccount">
        <span>profiledId:</span><label for="patchProfiled"></label><input type="text" class="form-control" placeholder="profiledID" id="patchProfiled">
        <span>webPropertyId:</span><label for="patchWebProperty"></label><input type="text" class="form-control" placeholder="webPropertyId" id="patchWebProperty">
        <span>goalId:</span><label for="patchGoal"></label><input type="text" class="form-control" placeholder="goalID" id="patchGoal">
      </div>
      <button type="submit" class="btn btn-default" id="patchBtn">修正目标</button>
    </form>
  </div

      <!--更新-->
  <div class="line3">
    <form class="navbar-form navbar-left" role="search" id="line3">
      <div class="form-group">
        <span>accountId:</span><label for="updateAccount"></label><input type="text" class="form-control" placeholder="accountID" id="updateAccount">
        <span>profiledId:</span><label for="updateProfiled"></label><input type="text" class="form-control" placeholder="profiledID" id="updateProfiled">
        <span>webPropertyId:</span><label for="updateWebProperty"></label><input type="text" class="form-control" placeholder="webPropertyId" id="updateWebProperty">
        <span>goalId:</span><label for="updateGoal"></label><input type="text" class="form-control" placeholder="goalID" id="updateGoal">
      </div>
      <button type="submit" class="btn btn-default" id="updateBtn">更新目标</button>
    </form>
  </div>
</div>

<script>
  /**
   * Sample JavaScript code for analytics.management.uploads.list
   * See instructions for running APIs Explorer code samples locally:
   * https://developers.google.com/explorer-help/guides/code_samples#javascript
   */

  function authenticate() {
    return gapi.auth2.getAuthInstance()
      .signIn({scope: "https://www.googleapis.com/auth/analytics https://www.googleapis.com/auth/analytics.edit https://www.googleapis.com/auth/analytics.readonly"})
      .then(function() { console.log("Sign-in successful"); },
        function(err) { console.error("Error signing in", err); });
  }
  function loadClient() {
    gapi.client.setApiKey("AIzaSyAjZD1FxUocOEGADxxNVorrJuk3uPHVD8A");
    return gapi.client.load("https://content.googleapis.com/discovery/v1/apis/analytics/v3/rest")
      .then(function() { console.log("GAPI client loaded for API"); },
        function(err) { console.error("Error loading GAPI client for API", err); });
  }

  // Make sure the client is loaded and sign-in is complete before calling this method.
  function execute() {
    const accountID = document.getElementById('deleteAccount').value;

    const webPropertyId = document.getElementById("deleteWebProperty").value;
    const customDataSourceId = document.getElementById('deleteCustomDataSourceId').value;
    return gapi.client.analytics.management.uploads.list({
    })

      .then(function(response) {
          // Handle the results here (response.result has the parsed body).
          console.log("Response", response);
        },
        function(err) { console.error("Execute error", err); });

  }
  gapi.load("client:auth2", function() {
    gapi.auth2.init({client_id: "7544542021-39d5r4jshfibkr85c05mc11m4fad9vvd.apps.googleusercontent.com"});
  });


</script>

<script>




  // 获取目标

  const accountID6 = document.getElementById('getAccount').value;
  const profileId6 = document.getElementById('getProfiled').value;
  const webPropertyId6 = document.getElementById("getWebProperty").value;
  const goalId6 = document.getElementById('getGoal').value;
  document.getElementById('getBtn').addEventListener("click", function deleteAccountUserLink() {
    if (confirm("是否确定获取目标？")){

      /*
 * Note: This code assumes you have an authorized Analytics client object.
 * See the Goals Developer Guide for details.
 */

      /*
       * This request gets an existing goal.
       */
      function getGoal() {
        var request = gapi.client.analytics.management.goals.get({
          'accountId': accountID6,
          'webPropertyId': webPropertyId6,
          'profileId': profileId6,
          'goalId': goalId6
        });
        request.execute(function (response) { // Handle the response. });
        })


      }}});

  // 插入目标


  const accountID2 = document.getElementById('insertAccount').value;
  const profileId2 = document.getElementById('insertProfiled').value;
  const webPropertyId2 = document.getElementById("insertWebProperty").value;
  document.getElementById('insertBtn').addEventListener("click", function insertAccountUserLink() {
    if (confirm("是否确认插入目标？")){

      /*
 * Note: This code assumes you have an authorized Analytics client object.
 * See the Goals Developer Guide for details.
 */

      /*
       * This request creates a new goal.
       */
      function insertGoal() {
        var request = gapi.client.analytics.management.goals.insert(
          {
            'accountId': accountID2,
            'webPropertyId': webPropertyId2,
            'profileId': profileId2,
            'resource': {
              'id': '7',
              'active': false,
              'name': 'My Goal',
              'type': 'VISIT_TIME_ON_SITE',
              'visitTimeOnSiteDetails': {
                'comparisonType': 'GREATER_THAN',
                'comparisonValue': 300
              }
            }
          });
        request.execute(function (response) { // Handle the response. });
        })



      }}});
  // 目标列表
  /*
   * Note: This code assumes you have an authorized Analytics client object.
   * See the User Permissions Developer Guide for details.
   */

  /*
   * Example 1:
   * Requests a list of all Account User links for the authorized user.
   */

  const accountID3 = document.getElementById('listAccount').value;
  const profileId3 = document.getElementById('listProfiled').value;
  const webPropertyId3 = document.getElementById("listWebProperty").value;
  document.getElementById("listBtn").addEventListener("click", function listAccountUserLinks() {
    if (confirm("确认读取目标列表？")){

      /*
  * Note: This code assumes you have an authorized Analytics client object.
  * See the Goals Developer Guide for details.
  */

      /*
       * Example 1:
       * Requests a list of all goals for the authorized user.
       */
      function listGoals() {
        var request = gapi.client.analytics.management.goals.list({
          'accountId': accountID3,
          'webPropertyId': webPropertyId3,
          'profileId': profileId3,
        });
        request.execute(printGoals);
      }

      /*
       * Example 2:
       * The results of the list method are passed as the results object.
       * The following code shows how to iterate through them.
       */
      function printGoals(results) {
        if (results && !results.error) {
          var goals = results.items;
          for (var i = 0, goal; goal = goals[i]; i++) {
            console.log('Account Id: ' + goal.accountId);
            console.log('Property Id: ' + goal.webPropertyId);
            console.log('Internal Property Id: ' + goal.internalWebPropertyId);
            console.log('View (Profile) Id: ' + goal.profileId);

            console.log('Goal Id: ' + goal.id);
            console.log('Goal Name: ' + goal.name);
            console.log('Goal Value: ' + goal.value);
            console.log('Goal Active: ' + goal.active);
            console.log('Goal Type: ' + goal.type);

            console.log('Created: ' + goal.created);
            console.log('Updated: ' + goal.updated);

            // Print the goal details depending on the type of goal.
            if (goal.urlDestinationDetails) {
              printDestinationDetails(goal.urlDestinationDetails);
            } else if (goal.visitTimeOnSiteDetails) {
              printComparisonDetails(goal.visitTimeOnSiteDetails);
            } else if (goal.visitNumPagesDetails) {
              printComparisonDetails(goal.visitNumPagesDetails);
            } else if (goal.eventDetails) {
              printEventDetails(goal.eventDetails);
            }
          }
        }
      }

      function printDestinationDetails(details) {
        console.log('Goal URL: ' + details.url);
        console.log('Case Sensitive: ' + details.caseSensitive);
        console.log('Match Type: ' + details.matchType);
        console.log('First Step Required: ' + details.firstStepRequired);

        // Iterate through the steps.
        var steps = details.steps;
        if (steps) {
          for (var i = 0, step; step = steps[i]; i++) {
            console.log('Step Number: ' + step.number);
            console.log('Step Name: ' + step.name);
            console.log('Step URL: ' + step.url);
          }
        } else {
          console.log('No Steps Configured.');
        }
      }

      function printComparisonDetails(details) {
        console.log('Comparison Type: ' + details.comparisonType);
        console.log('Comparison Value: ' + details.comparisonValue);
      }

      function printEventDetails(details) {
        var conditions = details.eventContitions;
        if (conditions) {
          for (var i = 0, condition; condition = conditions[i]; i++) {
            console.log('Condition Type: ' + condition.type);
            if (condition.type == 'VALUE') {
              console.log('Comparison Type: ' + condition.comparisonType);
              console.log('Comparison Value: ' + condition.comparisonValue);
            } else {
              console.log('Match Type: ' + condition.matchType);
              console.log('Expression: ' + condition.expression);
            }
          }
        }
      }


  }});

  // 修正目标

  const accountID4 = document.getElementById('patchAccount').value;
  const profileId4 = document.getElementById('patchProfiled').value;
  const webPropertyId4 = document.getElementById("patchWebProperty").value;
  const goalId4 = document.getElementById('patchGoal').value;
  document.getElementById('patchBtn').addEventListener("click", function insertAccountUserLink() {
    if (confirm("是否确认修正目标？")){

      /*
 * Note: This code assumes you have an authorized Analytics client object.
 * See the Goals Developer Guide for details.
 */

      /*
       * This request patches an existing goal.
       */
      function patchGoal() {
        var request = gapi.client.analytics.management.goals.patch(
          {
            'accountId': accountID4,
            'webPropertyId': profileId4,
            'profileId': webPropertyId4,
            'goalId': goalId4,
            'resource': {
              'id': '2',
              'active': true,
              'name': 'My Goal',
              'type': 'VISIT_TIME_ON_SITE',
              'visitTimeOnSiteDetails': {
                'comparissonType': 'GREATER_THAN',
                'comparisonValue': 300
              }
            }
          });
        request.execute(function (response) { // Handle the response. });
        })


      }}});

  // 更新目标
  /*
   * Note: This code assumes you have an authorized Analytics client object.
   * See the User Permissions Developer Guide for details.
   */

  /*
   * This request updates an existing Account User Link.
   */
  const accountID5 = document.getElementById('updateAccount').value;
  const profileId5 = document.getElementById('updateProfiled').value;
  const webPropertyId5 = document.getElementById("updateWebProperty").value;
  const goalId5 = document.getElementById('updateGoal').value;
  document.getElementById("updateBtn").addEventListener("click", function updateAccountUserLink() {
    if (confirm("是否确认更新目标？")){

      /*
  * Note: This code assumes you have an authorized Analytics client object.
  * See the Goals Developer Guide for details.
  */

      /*
       * This request updates an existing goal.
       */
      function updateGoal() {
        var request = gapi.client.analytics.management.goals.update(
          {
            'accountId': accountID5,
            'webPropertyId': profileId5,
            'profileId': webPropertyId5,
            'goalId': goalId5,
            'resource': {
              'active': true,
              'name': 'My Goal',
              'type': 'VISIT_TIME_ON_SITE',
              'visitTimeOnSiteDetails': {
                'comparissonType': 'GREATER_THAN',
                'comparisonValue': 300
              }
            }
          });
        request.execute(function (response) { // Handle the response. });
        })
      }}});

</script>
<script src="https://apis.google.com/js/client.js?onload=authorize"></script>
</body>
</html>
